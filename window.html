<!DOCTYPE html>
<html>
<head>
  <title>Opcor</title>
  <link rel="stylesheet" href="shiny.css">
  <script type="text/javascript" src="scrape.js"></script>
  <script>
    var video;
    function loadVideo() {
      document.getElementById('video-source').src = window.location.hash.slice(1);
      if (!video) { video = document.getElementById('video-fill'); }
      //video.focus(); // this was only necessary when there was an iframe
      video.load();
      video.play();
    }
    function onPress(event) {
      if (!(event.ctrlKey || event.metaKey || event.shiftKey)) {
        switch (event.keyCode) {
          case 32: // spacebar
          case 75: // k
            video.paused ? video.play() : video.pause(); // play/pause video
            break;
          case 77: // m
            video.muted = !video.muted; // mute audio
            break;
          case 74: // j
            video.currentTime -= 10; // skip back 10 seconds
            break;
          case 76: // l
            video.currentTime += 10; // skip forward 10 seconds
            break;
          case 70:
            if (!document.webkitFullscreenElement) {
              video.webkitRequestFullscreen();
            }
            else {
              document.webkitExitFullscreen();
            }
            break;
        }
      }
      else {
        keyPressed(event.key, event.ctrlKey, event.metaKey, event.shiftKey);
      }
    }
  </script>
</head>
<body onload="loadVideo()" onkeydown="onPress(event)">
  <video id="video-fill" controls>
    <source id="video-source" src="" type="video/mp4">
  </video>
</body>
</html>
