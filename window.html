<!DOCTYPE html>
<html>
<head>
  <title>Opcor</title>
  <link rel="stylesheet" href="shiny.css">
  <script type="text/javascript" src="scrape.js"></script>
  <script>
    var video;
    var frameEmbedDocument;
    function initialLoad() {
      frameEmbedDocument = document.getElementById('video-frame').contentWindow.document;
      frameEmbedDocument.head.innerHTML = '<style>html,body{height:100%;padding:0;border:none;margin:0;}#video-fill{position:absolute;width:100%;height:100%;}</style>';
      frameEmbedDocument.body.innerHTML = '<video id="video-fill" controls><source src="'
        + window.location.hash.slice(1) + '" type="video/mp4"></video>';
      frameEmbedDocument.body.onkeydown = onPress;

      video = frameEmbedDocument.getElementById('video-fill');
      video.focus(); // for keyboard events
      video.load();
      video.play();
    }
    function onPress(event) {
      if (!(event.ctrlKey || event.metaKey || event.shiftKey)) {
        switch (event.keyCode) {
          case 32: // spacebar
          case 75: // k
            video.paused ? video.play() : video.pause(); // play/pause video
            break;
          case 77: // m
            video.muted = !video.muted; // mute audio
            break;
          case 74: // j
            video.currentTime -= 10; // skip back 10 seconds
            break;
          case 76: // l
            video.currentTime += 10; // skip forward 10 seconds
            break;
          case 70:
            if (!document.webkitFullscreenElement) {
              video.webkitRequestFullscreen();
            }
            else {
              document.webkitExitFullscreen();
            }
            break;
        }
      }
      else {
        keyPressed(event.key, event.ctrlKey, event.metaKey, event.shiftKey);
        console.log("registered");
      }
    }
  </script>
</head>
<body onload="initialLoad()">
  <iframe id="video-frame" src="https://solarmoviez.to/ajax/v4_movie_episodes/" allowfullscreen=true></iframe>
</body>
</html>
